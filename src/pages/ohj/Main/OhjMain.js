import React, { useState, useEffect } from 'react';
import './Main.scss';
import '../../../styles/reset.scss';
import { useNavigate } from 'react-router-dom';
import CommentList from './components/CommentList';
import { RIGHT_FOOTER_LIST } from './components/RightFooter';

function OhjMain() {
  const navigate = useNavigate();

  const [userName] = useState('hacker');
  const [comment, setComment] = useState('');
  const [feedComments, setFeedComments] = useState([]);
  const [isValid, setIsValid] = useState(false);

  const [feeds, setFeeds] = useState([]);

  useEffect(() => {
    fetch('data/ohjFeedsDatas.json')
      .then((response) => response.json())
      .then((result) => setFeeds(result));
  }, []);

  useEffect(() => {
    fetch('data/ohjCommentData.json', {
      method: 'GET',
    })
      .then((response) => response.json())
      .then((result) => setFeedComments(result));
  }, []);

  const saveComment = (e) => {
    setComment(e.target.value);
    console.log(comment);
    activePublishBtn();
  };
  // ÎåìÍ∏Ä Ïù∏ÌíãÏ∞ΩÏùò Í∞íÏù¥ Í≥ÑÏÜç setComment -> comment Î°ú Îì§Ïñ¥Ïò®Îã§

  const activePublishBtn = (e) => {
    comment.length > 0 ? setIsValid(true) : setIsValid(false);
  };
  // ÎåìÍ∏Ä Ïù∏ÌíãÏ∞ΩÏùò Í∞í Í∏∏Ïù¥Í∞Ä 0Ïù¥ÏÉÅÏù¥Î©¥ true or false

  const post = (e) => {
    const copyFeedComments = [...feedComments];
    copyFeedComments.push(comment);
    setFeedComments(copyFeedComments);
    setComment('');
  };

  // {
  //   feedComments.map((el) => {
  //     return <CommentList userName={userName} userComment={el} />;
  //   });
  // }

  return (
    <div id="wrap">
      <header>
        <nav>
          <div id="logo">
            <div className="icon_logo">
              <a href="#">
                <img
                  src="images/ohj/westagram_icon_logo.png"
                  alt="Ïù∏Ïä§ÌÉÄÍ∑∏Îû® Í∑∏Î¶ºÎ°úÍ≥†"
                />
              </a>
            </div>
            <span />
            <div className="letter_logo">
              <a href="#">
                <img
                  src="images/ohj/westagram_letter_logo.png"
                  alt="Ïù∏Ïä§ÌÉÄÍ∑∏Îû® Í∏ÄÏûêÎ°úÍ≥†"
                />
              </a>
            </div>
          </div>
          <div id="nav_search">
            <input type="text" placeholder="Í≤ÄÏÉâ" />
            <img src="images/ohj/search_icon.png" alt="Í≤ÄÏÉâÎèãÎ≥¥Í∏∞" />
          </div>
          <div id="nav_icons">
            <span className="icon1">
              <img src="images/ohj/compass.png" alt="ÌÉêÏÉâ" />
            </span>
            <span className="icon2">
              <img src="images/ohj/like_heart.png" alt="Ï¢ãÏïÑÏöî" />
              <span className="red_dot" />
            </span>
            <span className="icon3">
              <img src="images/ohj/dm.png" alt="Îã§Ïù¥Î†âÌä∏Î©îÏÑ∏ÏßÄ" />
            </span>
            <button
              className="btn_toLogin"
              onClick={() => {
                navigate('/OhjLogin');
              }}
            >
              Î°úÍ∑∏Ïù∏ÌïòÍ∏∞
            </button>
          </div>
        </nav>
      </header>
      <main>
        <article className="article">
          {feeds.map((feed) => {
            return (
              <div className="feeds">
                <article>
                  <div id="post_host">
                    <a className="post_host_pic" href="#">
                      <img src={feed.user_img} alt="Ìè¨Ïä§Ìä∏Ï£ºÏù∏" />
                    </a>
                    <a className="post_host_nickname" href="#">
                      <span>{feed.user_name}</span>
                    </a>
                    <div className="dots">
                      <span className="dot_black" />
                      <span className="dot_black" />
                      <span className="dot_black" />
                    </div>
                  </div>

                  <div id="post_pic">
                    <img src={feed.user_feed_pic} alt="Ìè¨Ïä§ÌåÖÏÇ¨ÏßÑ" />
                  </div>

                  <div id="post_txt">
                    <div className="post_txt_icons">
                      <div className="post_txt_icon_left">
                        <span className="post_txt_icon1">
                          <img
                            src="images/ohj/post_like_heart.png"
                            alt="Ìè¨Ïä§Ìä∏Ï¢ãÏïÑÏöî"
                          />
                        </span>
                        <span className="post_txt_icon2">
                          <img
                            src="images/ohj/comment.png"
                            alt="Ìè¨Ïä§Ìä∏Ï¢ãÏïÑÏöî"
                          />
                        </span>
                        <span className="post_txt_icon3">
                          <img src="images/ohj/upload.png" alt="Ìè¨Ïä§Ìä∏Ï¢ãÏïÑÏöî" />
                        </span>
                      </div>
                      <div className="post_txt_icon_right">
                        <span className="post_txt_icon4">
                          <img
                            src="images/ohj/bookmark.png"
                            alt="Ìè¨Ïä§Ìä∏Ï¢ãÏïÑÏöî"
                          />
                        </span>
                      </div>
                    </div>
                    <div className="post_txt_comment">
                      <a href="#">
                        <img src={feed.liked_user_pic} alt="Ï¢ãÏïÑÏöî ÎàÑÎ•∏ ÏÇ¨Îûå" />
                      </a>
                      <span className="like">
                        <span className="strong">{feed.liked_user_name}</span>Îãò
                        Ïô∏<span className="strong"> {feed.liked_num}</span>Ïù¥
                        Ï¢ãÏïÑÌï©ÎãàÎã§
                      </span>
                      <ul className="comment">
                        <li className="post_host_nickname">
                          <span className="strong">{feed.user_name}</span>
                          <span>&nbsp;{feed.post_content}</span>
                        </li>
                        <span className="more">Îçî Î≥¥Í∏∞</span>
                        <li className="commentor_nickname comment1">
                          <span>
                            <span className="strong">honghong</span>
                            <span>&nbsp;Ïñ∏Ï†ú ÎèåÏïÑÏôÄ ??</span>
                          </span>
                          <img
                            src="images/ohj/like_heart.png"
                            alt="ÎåìÍ∏Ä Ï¢ãÏïÑÏöî"
                          />
                        </li>
                        <li className="commentor_nickname comment2">
                          <span>
                            <span className="strong">baeterang</span>
                            <span>&nbsp;Í±¥Í∞ïÌûà! Ï°∞Ïã¨Ìûà! Ï¶êÍ≤ÅÍ≤å üôèüèª</span>
                          </span>
                          <img
                            src="images/ohj/like_heart.png"
                            alt="ÎåìÍ∏Ä Ï¢ãÏïÑÏöî"
                          />
                        </li>
                        {/* {feedComments.map((feedComment) => {
                      return (
                        <li className={feedComment.class} key={feedComment.id}>
                          <span>
                            <span className="strong">
                              {feedComment.user_name}
                            </span>
                            <span>&nbsp;{feedComment.user_comment}</span>
                          </span>
                          <img
                            src="images/ohj/like_heart.png"
                            alt="ÎåìÍ∏Ä Ï¢ãÏïÑÏöî"
                          />
                        </li>
                      );
                    })} */}
                      </ul>
                    </div>
                    <div className="comment_window">
                      <input
                        className="comment_write"
                        type="text"
                        placeholder="ÎåìÍ∏Ä Îã¨Í∏∞..."
                        value={comment}
                        onChange={saveComment}
                        onKeyUp={activePublishBtn}
                      />
                      <button
                        type="button"
                        className={
                          comment.length > 0
                            ? 'activePublish'
                            : 'noActivePublish'
                        }
                        disabled={isValid ? false : true}
                      >
                        Í≤åÏãú
                      </button>
                    </div>
                  </div>
                </article>
              </div>
            );
          })}
        </article>

        <div className="main_right">
          <div id="right_my_account_pic">
            <a href="#">
              <img src="images/ohj/post_host_pic.jpeg" alt="ÎÇ¥ ÏÇ¨ÏßÑ" />
            </a>
            <div className="right_my_account_txt">
              <p>ohaangdoo</p>
              <p>ÌîÑÎ°†Ìä∏ÏóîÎìú Í∞úÎ∞úÏûê ‚ú®</p>
            </div>
          </div>
          <div id="story_board">
            <p className="story_top">
              <span>Ïä§ÌÜ†Î¶¨</span>
              <span>Î™®Îëê Î≥¥Í∏∞</span>
            </p>
            <ul>
              <li>
                <a href="#">
                  <img src="images/ohj/honghong.jpeg" alt="ÌåîÎ°úÏûâ Ïä§ÌÜ†Î¶¨" />
                </a>
                <div>
                  <p>honghong</p>
                  <p>3Î∂Ñ Ï†Ñ</p>
                </div>
              </li>
              <li>
                <a href="#">
                  <img src="images/ohj/ky_resto.jpeg" alt="ÌåîÎ°úÏûâ Ïä§ÌÜ†Î¶¨" />
                </a>
                <div>
                  <p>ky_resto</p>
                  <p>17Î∂Ñ Ï†Ñ</p>
                </div>
              </li>
              <li>
                <a href="#">
                  <img src="images/ohj/mujagi.jpeg" alt="ÌåîÎ°úÏûâ Ïä§ÌÜ†Î¶¨" />
                </a>
                <div>
                  <p>mujagi_official</p>
                  <p>1ÏãúÍ∞Ñ Ï†Ñ</p>
                </div>
              </li>
              <li>
                <a href="#">
                  <img src="images/ohj/ozzi_chego.jpeg" alt="ÌåîÎ°úÏûâ Ïä§ÌÜ†Î¶¨" />
                </a>
                <div>
                  <p>ozzi_chego</p>
                  <p>3ÏãúÍ∞Ñ Ï†Ñ</p>
                </div>
              </li>
            </ul>
          </div>
          <div id="recommand_board">
            <p className="recommand_top">
              <span>ÌöåÏõêÎãòÏùÑ ÏúÑÌïú Ï∂îÏ≤ú</span>
              <span>Î™®Îëê Î≥¥Í∏∞</span>
            </p>
            <ul>
              <li>
                <a href="#">
                  <img src="images/ohj/ohmarigod.jpeg" alt="ÌåîÎ°úÏûâ Ïä§ÌÜ†Î¶¨" />
                </a>
                <div>
                  <p>ohmarigod</p>
                  <p>seo_kÎãò Ïô∏ 3Î™ÖÏù¥ ÏïåÍ≥†ÏûàÏñ¥Ïöî</p>
                </div>
                <span>ÌåîÎ°úÏö∞</span>
              </li>
              <li>
                <a href="#">
                  <img src="images/ohj/rollipop933.jpeg" alt="ÌåîÎ°úÏûâ Ïä§ÌÜ†Î¶¨" />
                </a>
                <div>
                  <p>rollipop933</p>
                  <p>mujagi_officialÎãò Ïô∏ 24Î™ÖÏù¥ ÏïåÍ≥†ÏûàÏñ¥Ïöî</p>
                </div>
                <span>ÌåîÎ°úÏö∞</span>
              </li>
              <li>
                <a href="#">
                  <img src="images/ohj/donggurami.jpeg" alt="ÌåîÎ°úÏûâ Ïä§ÌÜ†Î¶¨" />
                </a>
                <div>
                  <p>donggurami</p>
                  <p>baeterangÎãò Ïô∏ 7Î™ÖÏù¥ ÏïåÍ≥†ÏûàÏñ¥Ïöî</p>
                </div>
                <span>ÌåîÎ°úÏö∞</span>
              </li>
            </ul>
          </div>
          <div id="right_footer">
            {RIGHT_FOOTER_LIST.map((footerList) => {
              return <span key={footerList.id}>{footerList.info}</span>;
            })}
          </div>
        </div>
      </main>
    </div>
  );
}

export default OhjMain;
